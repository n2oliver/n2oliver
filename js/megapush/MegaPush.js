/** 
 * megapush v1.1.1 - 2024-08-26 20:21:37
 * Copyright (c) 2024 RRZ ATIVIDADE DE INTERNET LTDA
 */
(()=>{var e={382:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>C,BW:()=>d,Cr:()=>w,Fq:()=>p,HN:()=>h,I6:()=>y,OT:()=>T,Tv:()=>E,UY:()=>m,X8:()=>k,XC:()=>c,Zl:()=>u,_C:()=>s,d2:()=>g,kK:()=>f,ny:()=>l,pP:()=>v,tX:()=>b,uw:()=>S,wK:()=>x});var o=t(601),i=t.n(o),r=t(314),a=t.n(r)()(i());a.push([e.id,'.tFCZoytdUpmQoXfh2ukK {\n  display: flex;\n  position: fixed;\n  z-index: 10000;\n  inset: 0;\n  overflow-y: auto;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.LPni2m3aJlchGsWEsmbJ {\n  position: fixed;\n  inset: 0;\n  pointer-events: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  /* min-height: 100vh; */\n  text-align: center;\n  box-sizing: border-box;\n  width: 100%;\n  font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif,\n    "Apple Color Emoji", "Segoe UI Emoji";\n  line-height: 1.15;\n  -webkit-text-size-adjust: 100%;\n  z-index: 10001;\n}\n\n.clut6jWtHcNN8XphcBZg {\n  align-items: start;\n}\n\n.clut6jWtHcNN8XphcBZg .JXwaLotGdOD4BL8Di6kA {\n  margin-top: 24px;\n}\n\n.MnZxqvcs54uq9ZSHE9wH {\n  align-items: end;\n}\n\n.MnZxqvcs54uq9ZSHE9wH .JXwaLotGdOD4BL8Di6kA {\n  margin-bottom: 48px;\n}\n\n.fzV7hnQE3uRwYQmT5VIw {\n  align-items: center;\n}\n\n.MAcNc5arf0iD9qf8DiYW {\n  justify-content: start;\n}\n\n.MAcNc5arf0iD9qf8DiYW .JXwaLotGdOD4BL8Di6kA {\n  margin-left: 24px;\n}\n\n.qk9E8V5fXuRwQDd3RYs6 {\n  justify-content: end;\n}\n\n.qk9E8V5fXuRwQDd3RYs6 .JXwaLotGdOD4BL8Di6kA {\n  margin-right: 24px;\n}\n\n.UWsC0TAj8STFdeOOzdu5 {\n  justify-content: center;\n}\n\n.JXwaLotGdOD4BL8Di6kA {\n  box-sizing: border-box;\n  display: inline-block;\n  background-color: #ffffff;\n  border-radius: 0.5rem;\n  box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n  padding: 20px 16px 16px;\n  text-align: left;\n  max-width: 320px;\n  width: 100%;\n  position: relative;\n  transform: scale(0.9);\n  transition: transform 0.3s ease;\n  z-index: 10002;\n  pointer-events: auto;\n}\n\n.tFCZoytdUpmQoXfh2ukK .JXwaLotGdOD4BL8Di6kA {\n  box-shadow: 0 0 0 0 transparent, 0 0 0 0 transparent,\n    0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);\n}\n\n@media (min-width: 640px) {\n  .JXwaLotGdOD4BL8Di6kA {\n    max-width: 512px;\n    padding: 24px;\n  }\n}\n\n.kncJ3C4jo40xQTWm5tE8 {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n}\n\n@media (min-width: 640px) {\n  .kncJ3C4jo40xQTWm5tE8 {\n    display: flex;\n    flex-direction: row;\n    align-items: flex-start;\n    text-align: left;\n  }\n}\n\n.SbJvzEK3UrIjlsHquye5 {\n  box-sizing: border-box;\n  margin-bottom: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  background-color: #ebf1f5;\n}\n\n@media (min-width: 640px) {\n  .SbJvzEK3UrIjlsHquye5 {\n    margin-right: 16px;\n  }\n}\n\n.SbJvzEK3UrIjlsHquye5 img {\n  height: 48px;\n  width: 48px;\n}\n\n@media (min-width: 640px) {\n  .SbJvzEK3UrIjlsHquye5 img {\n    height: 40px;\n    width: 40px;\n  }\n}\n\n.kRHsIHe4CKvMKT8KdGDQ {\n  width: 100%;\n}\n\n.SUVXNXbA7Mqa2FMyeyPX {\n  font-size: 18px;\n  line-height: 24px;\n  font-weight: 500;\n  color: #111827;\n  margin: 0;\n}\n\n.E04jYAHh157zDL9YV_YV {\n  margin-top: 8px;\n  margin-bottom: 0;\n  padding-bottom: 0;\n  font-size: 14px;\n  line-height: 20px;\n  color: #6b7280;\n}\n\n.Zjuq3Jw6WimewIWetIR8 {\n  box-sizing: border-box;\n  margin-top: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n@media (min-width: 640px) {\n  .Zjuq3Jw6WimewIWetIR8 {\n    justify-content: end;\n    flex-direction: row-reverse;\n  }\n}\n\n.LKHVCDiQJQ8huip7WJWY {\n  width: 100%;\n  box-sizing: border-box;\n  display: inline-flex;\n  justify-content: center;\n  border: 1px solid transparent;\n  border-radius: 6px;\n  padding: 8px 16px;\n  font-size: 14px;\n  line-height: 20px;\n  font-weight: 500;\n  transition: all 0.15s ease;\n  cursor: pointer;\n}\n\n@media (min-width: 640px) {\n  .LKHVCDiQJQ8huip7WJWY {\n    width: auto;\n  }\n}\n\n.yTlndumUsmv98gneUAhD {\n  background-color: #16a34a;\n  color: #ffffff;\n}\n\n.yTlndumUsmv98gneUAhD:hover {\n  background-color: #22c55e;\n}\n\n.hTWQAecLVbRj__PBi5wu {\n  border-color: #d1d5db;\n  background-color: #ffffff;\n  color: #374151;\n}\n\n.hTWQAecLVbRj__PBi5wu:hover {\n  color: #6b7280;\n  background-color: transparent;\n}\n\n.EOTrAjfGUBcJ6gZytalM {\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  bottom: -32px;\n  box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n  background: #fff;\npadding: 0 4px;\nborder-radius: 2px;\n}\n\n.tFCZoytdUpmQoXfh2ukK .EOTrAjfGUBcJ6gZytalM {\n  box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px,\n  rgba(0, 0, 0, 0.3) 0px 30px 60px -30px,\n  rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset;\n\n}\n\n.EOTrAjfGUBcJ6gZytalM img {\n  width: 64px;\n  height: auto;\n}\n',""]);var s="tFCZoytdUpmQoXfh2ukK",c="LPni2m3aJlchGsWEsmbJ",l="clut6jWtHcNN8XphcBZg",d="JXwaLotGdOD4BL8Di6kA",u="MnZxqvcs54uq9ZSHE9wH",p="fzV7hnQE3uRwYQmT5VIw",g="MAcNc5arf0iD9qf8DiYW",f="qk9E8V5fXuRwQDd3RYs6",m="UWsC0TAj8STFdeOOzdu5",h="kncJ3C4jo40xQTWm5tE8",v="SbJvzEK3UrIjlsHquye5",b="kRHsIHe4CKvMKT8KdGDQ",y="SUVXNXbA7Mqa2FMyeyPX",w="E04jYAHh157zDL9YV_YV",x="Zjuq3Jw6WimewIWetIR8",S="LKHVCDiQJQ8huip7WJWY",k="yTlndumUsmv98gneUAhD",E="hTWQAecLVbRj__PBi5wu",T="EOTrAjfGUBcJ6gZytalM";const C=a},314:e=>{"use strict";e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",o=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),o&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),o&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,o,i,r){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);o&&a[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),n.push(d))}},n}},601:e=>{"use strict";e.exports=function(e){return e[1]}},65:function(e,n,t){var o,i;!function(r,a){"use strict";o=function(){var e=function(){},n="undefined",t=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],i={},r=null;function a(e,n){var t=e[n];if("function"==typeof t.bind)return t.bind(e);try{return Function.prototype.bind.call(t,e)}catch(n){return function(){return Function.prototype.apply.apply(t,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(o){return"debug"===o&&(o="log"),typeof console!==n&&("trace"===o&&t?s:void 0!==console[o]?a(console,o):void 0!==console.log?a(console,"log"):e)}function l(){for(var t=this.getLevel(),i=0;i<o.length;i++){var r=o[i];this[r]=i<t?e:this.methodFactory(r,t,this.name)}if(this.log=this.debug,typeof console===n&&t<this.levels.SILENT)return"No console available for logging"}function d(e){return function(){typeof console!==n&&(l.call(this),this[e].apply(this,arguments))}}function u(e,n,t){return c(e)||d.apply(this,arguments)}function p(e,t){var a,s,c,d=this,p="loglevel";function g(e){var t=(o[e]||"silent").toUpperCase();if(typeof window!==n&&p){try{return void(window.localStorage[p]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(p)+"="+t+";"}catch(e){}}}function f(){var e;if(typeof window!==n&&p){try{e=window.localStorage[p]}catch(e){}if(typeof e===n)try{var t=window.document.cookie,o=encodeURIComponent(p),i=t.indexOf(o+"=");-1!==i&&(e=/^([^;]+)/.exec(t.slice(i+o.length+1))[1])}catch(e){}return void 0===d.levels[e]&&(e=void 0),e}}function m(){if(typeof window!==n&&p){try{window.localStorage.removeItem(p)}catch(e){}try{window.document.cookie=encodeURIComponent(p)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function h(e){var n=e;if("string"==typeof n&&void 0!==d.levels[n.toUpperCase()]&&(n=d.levels[n.toUpperCase()]),"number"==typeof n&&n>=0&&n<=d.levels.SILENT)return n;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?p+=":"+e:"symbol"==typeof e&&(p=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=t||u,d.getLevel=function(){return null!=c?c:null!=s?s:a},d.setLevel=function(e,n){return c=h(e),!1!==n&&g(c),l.call(d)},d.setDefaultLevel=function(e){s=h(e),f()||d.setLevel(e,!1)},d.resetLevel=function(){c=null,m(),l.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(r!==d&&(a=h(r.getLevel())),l.call(d),r===d)for(var e in i)i[e].rebuild()},a=h(r?r.getLevel():"WARN");var v=f();null!=v&&(c=h(v)),l.call(d)}(r=new p).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var n=i[e];return n||(n=i[e]=new p(e,r.methodFactory)),n};var g=typeof window!==n?window.log:void 0;return r.noConflict=function(){return typeof window!==n&&window.log===r&&(window.log=g),r},r.getLoggers=function(){return i},r.default=r,r},void 0===(i="function"==typeof o?o.call(n,t,n,e):o)||(e.exports=i)}()},545:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>v,"dialog-bottom":()=>m.Zl,"dialog-button":()=>m.uw,"dialog-button-accept":()=>m.X8,"dialog-button-cancel":()=>m.Tv,"dialog-button-container":()=>m.wK,"dialog-center":()=>m.Fq,"dialog-container":()=>m.XC,"dialog-content":()=>m.BW,"dialog-description":()=>m.Cr,"dialog-header":()=>m.HN,"dialog-horizontal-center":()=>m.UY,"dialog-icon-container":()=>m.pP,"dialog-left":()=>m.d2,"dialog-overlay":()=>m._C,"dialog-right":()=>m.kK,"dialog-title":()=>m.I6,"dialog-top":()=>m.ny,poweredby:()=>m.OT,"title-container":()=>m.tX});var o=t(72),i=t.n(o),r=t(825),a=t.n(r),s=t(659),c=t.n(s),l=t(56),d=t.n(l),u=t(540),p=t.n(u),g=t(113),f=t.n(g),m=t(382),h={};h.styleTagTransform=f(),h.setAttributes=d(),h.insert=c().bind(null,"head"),h.domAPI=a(),h.insertStyleElement=p();i()(m.Ay,h);const v=m.Ay&&m.Ay.locals?m.Ay.locals:void 0},72:e=>{"use strict";var n=[];function t(e){for(var t=-1,o=0;o<n.length;o++)if(n[o].identifier===e){t=o;break}return t}function o(e,o){for(var r={},a=[],s=0;s<e.length;s++){var c=e[s],l=o.base?c[0]+o.base:c[0],d=r[l]||0,u="".concat(l," ").concat(d);r[l]=d+1;var p=t(u),g={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)n[p].references++,n[p].updater(g);else{var f=i(g,o);o.byIndex=s,n.splice(s,0,{identifier:u,updater:f,references:1})}a.push(u)}return a}function i(e,n){var t=n.domAPI(n);t.update(e);return function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,i){var r=o(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<r.length;a++){var s=t(r[a]);n[s].references--}for(var c=o(e,i),l=0;l<r.length;l++){var d=t(r[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}r=c}}},659:e=>{"use strict";var n={};e.exports=function(e,t){var o=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},540:e=>{"use strict";e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},56:(e,n,t)=>{"use strict";e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var i=void 0!==t.layer;i&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,i&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var r=t.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),n.styleTagTransform(o,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},113:e=>{"use strict";e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}}},n={};function t(o){var i=n[o];if(void 0!==i)return i.exports;var r=n[o]={id:o,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.nc=void 0,(()=>{"use strict";var e=t(65),n=t.n(e);new URLSearchParams(window.location.search).has("MegaPushEnableLogs")||"localhost"===window.location.hostname?n().setLevel("debug"):n().setLevel("silent");const o=n();var i=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,s)}c((o=o.apply(e,n||[])).next())}))};const r=document.currentScript,a=(null==r?void 0:r.getAttribute("data-site"))||"",s="localhost"===window.location.hostname?"/api/v1/":"https://app.megapush.com.br/api/v1/";let c=null;const l=e=>(e.public_key||(o.warn("Public key is empty, using fallback public key."),e.public_key="BPWGOZlslTBgQmOezax7e9aVJNPyVOWdNR7PU3GfnzZwXRPlN11zotMUXeWO_ATwj9SwTrFXBOc5inuRVd0f2js"),e),d=()=>i(void 0,void 0,void 0,(function*(){return c||(yield i(void 0,void 0,void 0,(function*(){const e=localStorage.getItem("megapush_site_settings"),n=(new Date).getTime();if(e){const{settings:t,timestamp:i}=JSON.parse(e);if(n-i<864e5)return o.log("Using saved settings:",t),c=l(t),c}const t=yield fetch(`${s}sites/${a}/`);if(!t.ok)throw new Error("Failed to fetch site settings");const i=yield t.json();return c=l(i),localStorage.setItem("megapush_site_settings",JSON.stringify({settings:c,timestamp:n})),o.log("Using remote settings:",c),c}))),{siteId:a,apiBaseURL:s,siteSettings:c}}));function u(e){const n=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(n),o=new Uint8Array(t.length);for(let e=0;e<t.length;++e)o[e]=t.charCodeAt(e);return o}var p=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,s)}c((o=o.apply(e,n||[])).next())}))};const g={registerServiceWorker(){"serviceWorker"in navigator?navigator.serviceWorker.register("/megapush-service-worker.js").then((e=>{o.log("Service Worker registered:",e),e.installing?e.installing.addEventListener("statechange",(n=>{"activated"===n.target.state&&this.subscribeToPushNotifications(e)})):(e.waiting||e.active)&&this.subscribeToPushNotifications(e)})).catch((e=>{o.error("Service Worker registration failed:",e)})):o.warn("Service Worker not supported in this browser.")},sendSubscriptionToServer(e){return p(this,void 0,void 0,(function*(){const n=yield d(),t=e.getKey?e.getKey("p256dh"):"",i=e.getKey?e.getKey("auth"):"",r={site:n.siteId,endpoint:e.endpoint,p256dh_key:t?btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(t)))):"",auth_key:i?btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(i)))):""};fetch(`${n.apiBaseURL}subscribers/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((e=>{e.ok?(localStorage.setItem("megapush_subscribed","true"),o.log("Subscriber registered successfully.")):o.error("Failed to register subscriber:",e.statusText)}))}))},subscribeToPushNotifications(e){return p(this,void 0,void 0,(function*(){if("PushManager"in window){const n=yield d();e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:u(n.siteSettings.public_key)}).then((e=>{o.log("Push subscription successful:",e),this.sendSubscriptionToServer(e)})).catch((e=>{o.error("Push subscription failed:",e)}))}else o.warn("Push notifications not supported in this browser.")}))},isSubscribed:()=>"true"===localStorage.getItem("megapush_subscribed"),isRecentlyDeclined(){const e=localStorage.getItem("megapush_declined");if(e){const n=new Date(parseInt(e)),t=((new Date).getTime()-n.getTime())/1e3/60/60;return o.log("Hours since decline:",t),t<24}return!1},isSupported:()=>"serviceWorker"in navigator&&"PushManager"in window};var f=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,s)}c((o=o.apply(e,n||[])).next())}))};const m=t(545),h={init(){return f(this,void 0,void 0,(function*(){const e=yield d(),n=()=>{!1===e.siteSettings.dialog?(o.log("Dialog is disabled. Not showing prompt."),g.registerServiceWorker()):(o.log("Showing prompt."),this.showCustomPrompt(e.siteSettings).then((e=>{e?(o.log("User accepted notifications."),g.registerServiceWorker()):o.log("User declined notifications.")})))};switch(e.siteSettings.activation_type){case"auto":n();break;case"scroll":window.addEventListener("scroll",(function e(){window.scrollY>100&&(window.removeEventListener("scroll",e),n())}));break;case"mouseout":document.addEventListener("mouseout",(function e(t){t.clientY<0&&(document.removeEventListener("mouseout",e),n())}));break;case"delay":setTimeout(n,1e3*e.siteSettings.activation_time);break;case"inactivity":let t;const i=()=>{clearTimeout(t),t=window.setTimeout(n,1e3*e.siteSettings.activation_time)};document.addEventListener("mousemove",i),document.addEventListener("keypress",i),i();break;case"visibleElement":const r=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(r.disconnect(),n())}))})),a=document.querySelector(e.siteSettings.activation_element_selector);a&&r.observe(a);break;default:o.log("Unknown activation type.")}}))},showCustomPrompt:e=>new Promise(((n,t)=>{const o=document.createElement("div");e.lightbox&&(o.className=m["dialog-overlay"]);const i=document.createElement("div");i.className=`${m["dialog-container"]} ${m[`dialog-${e.dialog_vertical_alignment}`]} ${m[`dialog-${"center"===e.dialog_horizontal_alignment?"horizontal-center":e.dialog_horizontal_alignment}`]}`;const r=document.createElement("div");r.className=m["dialog-content"];const a=document.createElement("div");a.className=m["dialog-header"];const s=document.createElement("div");s.className=m["dialog-icon-container"];const c=document.createElement("img");c.src=e.icon?e.icon:"https://cdn.megapush.com.br/assets/img/logo-icon.svg",s.appendChild(c);const l=document.createElement("div");l.className=m["title-container"];const d=document.createElement("h3");d.className=m["dialog-title"],d.textContent=e.dialog_title;const u=document.createElement("div");u.className=m["dialog-description"],u.textContent=e.dialog_message,l.appendChild(d),l.appendChild(u),a.appendChild(s),a.appendChild(l);const p=document.createElement("div");p.className=m["dialog-button-container"];const g=document.createElement("button");g.type="button",g.className=`${m["dialog-button"]} ${m["dialog-button-accept"]}`,g.textContent=e.dialog_button_yes,g.onclick=()=>y(v);const f=document.createElement("button");f.type="button",f.className=`${m["dialog-button"]} ${m["dialog-button-cancel"]}`,f.textContent=e.dialog_button_no,f.onclick=()=>y(b);const h=document.createElement("div");h.className=m.poweredby,h.innerHTML='<a href="https://megapush.com.br/" target="_blank" title="MegaPush"><img src="https://cdn.megapush.com.br/assets/img/logo.svg" alt="MegaPush"></a>',p.appendChild(g),p.appendChild(f),r.appendChild(a),r.appendChild(p),r.appendChild(h),i.appendChild(r),o.appendChild(i),i.className=`${m["dialog-container"]} ${m[`dialog-${e.dialog_vertical_alignment}`]} ${m[`dialog-${"center"===e.dialog_horizontal_alignment?"horizontal-center":e.dialog_horizontal_alignment}`]}`;const v=()=>{n(!0)},b=()=>{localStorage.setItem("megapush_declined",Date.now().toString()),n(!1)},y=e=>{r.style.transform="scale(0.9)",setTimeout((()=>{document.body.removeChild(o),e()}),300)};setTimeout((()=>{r.style.transform+=" scale(1)"}),10),document.body.appendChild(o)}))};var v=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,s)}c((o=o.apply(e,n||[])).next())}))};const b={init(){return v(this,void 0,void 0,(function*(){g.isSupported()?(o.log("Notification permission:",Notification.permission),x()?y():S()?o.log("User is not subscribed to push notifications, and permission is denied."):k()?w():E()&&o.warn("Unknown notification permission:",Notification.permission)):o.warn("Service Worker or PushManager not supported in this browser.")}))}},y=()=>{g.isSubscribed()?o.log("User is already subscribed to push notifications."):(o.log("User is subscribed to push notifications but not to MegaPush."),g.registerServiceWorker())},w=()=>{o.log("User is not subscribed to push notifications, and permission is default."),g.isRecentlyDeclined()?o.log("User recently declined notifications. Will not prompt again."):h.init()},x=()=>"granted"===Notification.permission,S=()=>"denied"===Notification.permission,k=()=>"default"===Notification.permission,E=()=>!["granted","denied","default"].includes(Notification.permission);b.init()})()})();